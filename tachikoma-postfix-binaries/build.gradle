plugins {
    id "com.jtitor.rust" version "0.1.4"
    id "base"
}

configurations {
    api
}

dependencies {
    api project(":tachikoma-backend-api-proto")
    api "com.google.protobuf:protobuf-java:$protoc_version"
}


task apiCopy([type: Copy]) {
    configurations.api.asFileTree.each {
        from(zipTree(it))
        include '**/*.proto'
    }
    into file("${buildDir}/grpc-api/")
}

task myZip(type: Zip) {
    from 'somedir'
}

assemble.dependsOn apiCopy
assemble.dependsOn rustBuildTop

syntax = "proto3";

option java_multiple_files = true;
option java_outer_classname = "MTAMailTransferProto";

package com.sourceforgery.tachikoma.mta;

import "google/protobuf/empty.proto";


service MTAEmailQueue {
    rpc getEmails(stream MTAQueuedNotification) returns (stream EmailMessage);
    rpc incomingEmail(IncomingEmailMessage) returns (google.protobuf.Empty);
}

message EmailMessage {
    repeated string emailAddresses = 101;
    string from = 102;

    string body = 201;
}

message IncomingEmailMessage {
    string emailAddress = 101;

    bytes body = 201;
}

message MTAQueuedNotification {
    string messageId = 101;
}